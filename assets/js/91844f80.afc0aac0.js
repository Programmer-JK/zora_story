"use strict";(self.webpackChunkjk_story=self.webpackChunkjk_story||[]).push([[6795],{6521:(n,e,l)=>{l.r(e),l.d(e,{assets:()=>d,contentTitle:()=>a,default:()=>h,frontMatter:()=>r,metadata:()=>c,toc:()=>t});var s=l(4848),i=l(8453);const r={},a="LAMP \uc2a4\ud0dd \uc124\uce58 \ubc0f \uad6c\uc131 \uac00\uc774\ub4dc",c={id:"Network/LAMP \uc2a4\ud0dd \uc124\uce58 \ubc0f \uad6c\uc131 \uac00\uc774\ub4dc",title:"LAMP \uc2a4\ud0dd \uc124\uce58 \ubc0f \uad6c\uc131 \uac00\uc774\ub4dc",description:"\uc791\uc131\uc77c : 2024.12.03",source:"@site/docs/Network/LAMP \uc2a4\ud0dd \uc124\uce58 \ubc0f \uad6c\uc131 \uac00\uc774\ub4dc.md",sourceDirName:"Network",slug:"/Network/LAMP \uc2a4\ud0dd \uc124\uce58 \ubc0f \uad6c\uc131 \uac00\uc774\ub4dc",permalink:"/zora_story/docs/Network/LAMP \uc2a4\ud0dd \uc124\uce58 \ubc0f \uad6c\uc131 \uac00\uc774\ub4dc",draft:!1,unlisted:!1,tags:[],version:"current",frontMatter:{},sidebar:"studySidebar",previous:{title:"DB replication",permalink:"/zora_story/docs/Network/DB replication"},next:{title:"MySQL root \ube44\ubc00\ubc88\ud638 \uc7ac\uc124\uc815",permalink:"/zora_story/docs/Network/MySQL root \ube44\ubc00\ubc88\ud638 \uc7ac\uc124\uc815"}},d={},t=[{value:"1. \uae30\ubcf8 \uc2dc\uc2a4\ud15c \uc900\ube44",id:"1-\uae30\ubcf8-\uc2dc\uc2a4\ud15c-\uc900\ube44",level:2},{value:"2. \uc8fc\uc694 \uad6c\uc131\uc694\uc18c \uc124\uce58",id:"2-\uc8fc\uc694-\uad6c\uc131\uc694\uc18c-\uc124\uce58",level:2},{value:"Nginx \uc6f9\uc11c\ubc84",id:"nginx-\uc6f9\uc11c\ubc84",level:3},{value:"MySQL \ub370\uc774\ud130\ubca0\uc774\uc2a4",id:"mysql-\ub370\uc774\ud130\ubca0\uc774\uc2a4",level:3},{value:"PHP \ubc0f \ubaa8\ub4c8",id:"php-\ubc0f-\ubaa8\ub4c8",level:3},{value:"3. Nginx \uad6c\uc131",id:"3-nginx-\uad6c\uc131",level:2},{value:"\uae30\ubcf8 \uc124\uc815",id:"\uae30\ubcf8-\uc124\uc815",level:3},{value:"4. MySQL \uad8c\ud55c \uad00\ub9ac",id:"4-mysql-\uad8c\ud55c-\uad00\ub9ac",level:2},{value:"\uc0ac\uc6a9\uc790 \uad00\ub9ac",id:"\uc0ac\uc6a9\uc790-\uad00\ub9ac",level:3},{value:"\uc6d0\uaca9 \uc811\uc18d \uc124\uc815",id:"\uc6d0\uaca9-\uc811\uc18d-\uc124\uc815",level:3},{value:"5. \ubcf4\uc548 \uc124\uc815",id:"5-\ubcf4\uc548-\uc124\uc815",level:2},{value:"\ud30c\uc77c \uad8c\ud55c",id:"\ud30c\uc77c-\uad8c\ud55c",level:3},{value:"\ubc29\ud654\ubcbd \uad00\ub9ac",id:"\ubc29\ud654\ubcbd-\uad00\ub9ac",level:3},{value:"6. \uc5f0\uacb0 \ud14c\uc2a4\ud2b8",id:"6-\uc5f0\uacb0-\ud14c\uc2a4\ud2b8",level:2},{value:"\uc11c\ube44\uc2a4 \uc0c1\ud0dc \ud655\uc778",id:"\uc11c\ube44\uc2a4-\uc0c1\ud0dc-\ud655\uc778",level:3},{value:"MySQL \uc5f0\uacb0 \ud14c\uc2a4\ud2b8",id:"mysql-\uc5f0\uacb0-\ud14c\uc2a4\ud2b8",level:3},{value:"7. \ubb38\uc81c \ud574\uacb0",id:"7-\ubb38\uc81c-\ud574\uacb0",level:2},{value:"8. MySQL \uc0c1\uc138 \uc124\uc815",id:"8-mysql-\uc0c1\uc138-\uc124\uc815",level:2},{value:"\uc0ac\uc6a9\uc790 \uad8c\ud55c \uad00\ub9ac",id:"\uc0ac\uc6a9\uc790-\uad8c\ud55c-\uad00\ub9ac",level:3},{value:"\ubcf4\uc548 \uc124\uc815",id:"\ubcf4\uc548-\uc124\uc815",level:3},{value:"9. PHP-FPM \uc0c1\uc138 \uc124\uc815",id:"9-php-fpm-\uc0c1\uc138-\uc124\uc815",level:2},{value:"www.conf \uc124\uc815",id:"wwwconf-\uc124\uc815",level:3},{value:"php.ini \uc8fc\uc694 \uc124\uc815",id:"phpini-\uc8fc\uc694-\uc124\uc815",level:3},{value:"10. \ubaa8\ub2c8\ud130\ub9c1 \ubc0f \ub514\ubc84\uae45",id:"10-\ubaa8\ub2c8\ud130\ub9c1-\ubc0f-\ub514\ubc84\uae45",level:2},{value:"MySQL \ubaa8\ub2c8\ud130\ub9c1",id:"mysql-\ubaa8\ub2c8\ud130\ub9c1",level:3},{value:"PHP \ubaa8\ub2c8\ud130\ub9c1",id:"php-\ubaa8\ub2c8\ud130\ub9c1",level:3},{value:"11. \uc131\ub2a5 \ucd5c\uc801\ud654",id:"11-\uc131\ub2a5-\ucd5c\uc801\ud654",level:2},{value:"MySQL \ud29c\ub2dd",id:"mysql-\ud29c\ub2dd",level:3},{value:"Nginx \ud29c\ub2dd",id:"nginx-\ud29c\ub2dd",level:3},{value:"12. SELinux \uad6c\uc131 (CentOS/RHEL)",id:"12-selinux-\uad6c\uc131-centosrhel",level:2},{value:"13. SSL/TLS \uc124\uc815",id:"13-ssltls-\uc124\uc815",level:2},{value:"Let&#39;s Encrypt \uc778\uc99d\uc11c \uc124\uce58",id:"lets-encrypt-\uc778\uc99d\uc11c-\uc124\uce58",level:3},{value:"Nginx SSL \uc124\uc815",id:"nginx-ssl-\uc124\uc815",level:3},{value:"14. \ubc31\uc5c5 \uc124\uc815",id:"14-\ubc31\uc5c5-\uc124\uc815",level:2},{value:"MySQL \ubc31\uc5c5",id:"mysql-\ubc31\uc5c5",level:3},{value:"\uc6f9 \ub370\uc774\ud130 \ubc31\uc5c5",id:"\uc6f9-\ub370\uc774\ud130-\ubc31\uc5c5",level:3},{value:"15. \ub85c\uadf8 \uad00\ub9ac",id:"15-\ub85c\uadf8-\uad00\ub9ac",level:2},{value:"\ub85c\uadf8 \uc21c\ud658 \uc124\uc815",id:"\ub85c\uadf8-\uc21c\ud658-\uc124\uc815",level:3},{value:"\ub85c\uadf8 \ubaa8\ub2c8\ud130\ub9c1",id:"\ub85c\uadf8-\ubaa8\ub2c8\ud130\ub9c1",level:3}];function o(n){const e={a:"a",blockquote:"blockquote",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",li:"li",ol:"ol",p:"p",pre:"pre",ul:"ul",...(0,i.R)(),...n.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)(e.blockquote,{children:["\n",(0,s.jsx)(e.p,{children:"\uc791\uc131\uc77c : 2024.12.03"}),"\n"]}),"\n",(0,s.jsx)(e.header,{children:(0,s.jsx)(e.h1,{id:"lamp-\uc2a4\ud0dd-\uc124\uce58-\ubc0f-\uad6c\uc131-\uac00\uc774\ub4dc",children:"LAMP \uc2a4\ud0dd \uc124\uce58 \ubc0f \uad6c\uc131 \uac00\uc774\ub4dc"})}),"\n",(0,s.jsx)(e.h2,{id:"1-\uae30\ubcf8-\uc2dc\uc2a4\ud15c-\uc900\ube44",children:"1. \uae30\ubcf8 \uc2dc\uc2a4\ud15c \uc900\ube44"}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-bash",children:"# \uc2dc\uc2a4\ud15c \uc5c5\ub370\uc774\ud2b8\nsudo apt update\nsudo apt upgrade -y\n"})}),"\n",(0,s.jsx)(e.h2,{id:"2-\uc8fc\uc694-\uad6c\uc131\uc694\uc18c-\uc124\uce58",children:"2. \uc8fc\uc694 \uad6c\uc131\uc694\uc18c \uc124\uce58"}),"\n",(0,s.jsx)(e.h3,{id:"nginx-\uc6f9\uc11c\ubc84",children:"Nginx \uc6f9\uc11c\ubc84"}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-bash",children:"sudo apt install nginx -y\nsudo systemctl start nginx\nsudo systemctl enable nginx\n"})}),"\n",(0,s.jsx)(e.h3,{id:"mysql-\ub370\uc774\ud130\ubca0\uc774\uc2a4",children:"MySQL \ub370\uc774\ud130\ubca0\uc774\uc2a4"}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-bash",children:"# \uc124\uce58\nsudo apt install mysql-server -y\nsudo systemctl start mysql\nsudo systemctl enable mysql\n\n# \ubcf4\uc548 \uc124\uc815\nsudo mysql_secure_installation\n"})}),"\n",(0,s.jsx)(e.h3,{id:"php-\ubc0f-\ubaa8\ub4c8",children:"PHP \ubc0f \ubaa8\ub4c8"}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-bash",children:"# \uae30\ubcf8 \uc124\uce58\nsudo apt install php-fpm php-mysql -y\n\n# \ucd94\uac00 \ubaa8\ub4c8\nsudo apt install php-curl php-gd php-intl php-mbstring php-soap php-xml php-xmlrpc php-zip -y\n\n# PHP-FPM \ud65c\uc131\ud654\nsudo systemctl start php8.1-fpm\nsudo systemctl enable php8.1-fpm\n"})}),"\n",(0,s.jsx)(e.h2,{id:"3-nginx-\uad6c\uc131",children:"3. Nginx \uad6c\uc131"}),"\n",(0,s.jsx)(e.h3,{id:"\uae30\ubcf8-\uc124\uc815",children:"\uae30\ubcf8 \uc124\uc815"}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-nginx",children:"server {\n    listen 80 default_server;\n    root /var/www/html;\n    index index.php index.html;\n\n    location / {\n        try_files $uri $uri/ =404;\n    }\n\n    location ~ \\.php$ {\n        include snippets/fastcgi-php.conf;\n        fastcgi_pass unix:/var/run/php/php8.1-fpm.sock;\n        fastcgi_param SCRIPT_FILENAME $document_root$fastcgi_script_name;\n        include fastcgi_params;\n        fastcgi_intercept_errors on;\n    }\n}\n"})}),"\n",(0,s.jsx)(e.h2,{id:"4-mysql-\uad8c\ud55c-\uad00\ub9ac",children:"4. MySQL \uad8c\ud55c \uad00\ub9ac"}),"\n",(0,s.jsx)(e.h3,{id:"\uc0ac\uc6a9\uc790-\uad00\ub9ac",children:"\uc0ac\uc6a9\uc790 \uad00\ub9ac"}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-sql",children:"-- \uc0ac\uc6a9\uc790 \uc0dd\uc131\nCREATE USER '\uc0ac\uc6a9\uc790'@'localhost' IDENTIFIED BY '\ube44\ubc00\ubc88\ud638';\nCREATE USER '\uc0ac\uc6a9\uc790'@'%' IDENTIFIED BY '\ube44\ubc00\ubc88\ud638';\n\n-- \uad8c\ud55c \ubd80\uc5ec\nGRANT ALL PRIVILEGES ON \ub370\uc774\ud130\ubca0\uc774\uc2a4.* TO '\uc0ac\uc6a9\uc790'@'localhost';\nGRANT SELECT, INSERT ON \ub370\uc774\ud130\ubca0\uc774\uc2a4.* TO '\uc0ac\uc6a9\uc790'@'%';\n\n-- \uad8c\ud55c \uc801\uc6a9\nFLUSH PRIVILEGES;\n"})}),"\n",(0,s.jsx)(e.h3,{id:"\uc6d0\uaca9-\uc811\uc18d-\uc124\uc815",children:"\uc6d0\uaca9 \uc811\uc18d \uc124\uc815"}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-bash",children:"# MySQL \uc124\uc815\nbind-address = 0.0.0.0\n\n# \ubc29\ud654\ubcbd \uc124\uc815\nsudo ufw allow 3306/tcp\n"})}),"\n",(0,s.jsx)(e.h2,{id:"5-\ubcf4\uc548-\uc124\uc815",children:"5. \ubcf4\uc548 \uc124\uc815"}),"\n",(0,s.jsx)(e.h3,{id:"\ud30c\uc77c-\uad8c\ud55c",children:"\ud30c\uc77c \uad8c\ud55c"}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-bash",children:"sudo chown -R www-data:www-data /var/www/html\nsudo chmod -R 755 /var/www/html\n"})}),"\n",(0,s.jsx)(e.h3,{id:"\ubc29\ud654\ubcbd-\uad00\ub9ac",children:"\ubc29\ud654\ubcbd \uad00\ub9ac"}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-bash",children:"# Ubuntu/Debian\nsudo ufw status\nsudo ufw allow 80/tcp\nsudo ufw allow 443/tcp\n\n# CentOS/RHEL\nsudo firewall-cmd --list-all\nsudo firewall-cmd --permanent --add-service=http\nsudo firewall-cmd --permanent --add-service=https\nsudo firewall-cmd --reload\n"})}),"\n",(0,s.jsx)(e.h2,{id:"6-\uc5f0\uacb0-\ud14c\uc2a4\ud2b8",children:"6. \uc5f0\uacb0 \ud14c\uc2a4\ud2b8"}),"\n",(0,s.jsx)(e.h3,{id:"\uc11c\ube44\uc2a4-\uc0c1\ud0dc-\ud655\uc778",children:"\uc11c\ube44\uc2a4 \uc0c1\ud0dc \ud655\uc778"}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-bash",children:"# \uc6f9\uc11c\ubc84\nsudo nginx -t\nsudo systemctl status nginx\n\n# PHP\nsudo systemctl status php8.1-fpm\n\n# MySQL\nsudo systemctl status mysql\n"})}),"\n",(0,s.jsx)(e.h3,{id:"mysql-\uc5f0\uacb0-\ud14c\uc2a4\ud2b8",children:"MySQL \uc5f0\uacb0 \ud14c\uc2a4\ud2b8"}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-bash",children:"# \ub85c\uceec \ud14c\uc2a4\ud2b8\nmysql -u root -p\n\n# \uc6d0\uaca9 \ud14c\uc2a4\ud2b8\ntelnet \uc11c\ubc84IP 3306\nnc -zv \uc11c\ubc84IP 3306\n"})}),"\n",(0,s.jsx)(e.h2,{id:"7-\ubb38\uc81c-\ud574\uacb0",children:"7. \ubb38\uc81c \ud574\uacb0"}),"\n",(0,s.jsxs)(e.ol,{children:["\n",(0,s.jsxs)(e.li,{children:["\n",(0,s.jsx)(e.p,{children:"\ub85c\uadf8 \ud655\uc778"}),"\n",(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsxs)(e.li,{children:["Nginx: ",(0,s.jsx)(e.code,{children:"/var/log/nginx/error.log"})]}),"\n",(0,s.jsxs)(e.li,{children:["PHP: ",(0,s.jsx)(e.code,{children:"/var/log/php8.1-fpm.log"})]}),"\n",(0,s.jsxs)(e.li,{children:["MySQL: ",(0,s.jsx)(e.code,{children:"/var/log/mysql/error.log"})]}),"\n"]}),"\n"]}),"\n",(0,s.jsxs)(e.li,{children:["\n",(0,s.jsx)(e.p,{children:"\uad8c\ud55c \ubb38\uc81c"}),"\n",(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsx)(e.li,{children:"\ud30c\uc77c \uc18c\uc720\uad8c \uc7ac\uc124\uc815"}),"\n",(0,s.jsx)(e.li,{children:"SELinux \uc124\uc815 \ud655\uc778 (CentOS)"}),"\n"]}),"\n"]}),"\n",(0,s.jsxs)(e.li,{children:["\n",(0,s.jsx)(e.p,{children:"\ubc29\ud654\ubcbd \uc774\uc288"}),"\n",(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsx)(e.li,{children:"\ud3ec\ud2b8 \uc0c1\ud0dc \ud655\uc778"}),"\n",(0,s.jsx)(e.li,{children:"iptables \uaddc\uce59 \uac80\uc99d"}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,s.jsx)(e.h2,{id:"8-mysql-\uc0c1\uc138-\uc124\uc815",children:"8. MySQL \uc0c1\uc138 \uc124\uc815"}),"\n",(0,s.jsx)(e.h3,{id:"\uc0ac\uc6a9\uc790-\uad8c\ud55c-\uad00\ub9ac",children:"\uc0ac\uc6a9\uc790 \uad8c\ud55c \uad00\ub9ac"}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-sql",children:"-- \uad8c\ud55c \uc870\ud68c\nSHOW GRANTS FOR '\uc0ac\uc6a9\uc790'@'localhost';\nSELECT user, host FROM mysql.user;\n\n-- \ube44\ubc00\ubc88\ud638 \ubcc0\uacbd\nALTER USER '\uc0ac\uc6a9\uc790'@'localhost' IDENTIFIED BY '\uc0c8\ube44\ubc00\ubc88\ud638';\n\n-- \ubd88\ud544\uc694\ud55c \uacc4\uc815 \uc815\ub9ac\nDELETE FROM mysql.user \nWHERE NOT (user = '\ubcf4\uc874\ud560\uc0ac\uc6a9\uc790' AND host = '\ubcf4\uc874\ud560\ud638\uc2a4\ud2b8')\n  AND user != 'root';\n"})}),"\n",(0,s.jsx)(e.h3,{id:"\ubcf4\uc548-\uc124\uc815",children:"\ubcf4\uc548 \uc124\uc815"}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-sql",children:"-- \uc6d0\uaca9 root \ub85c\uadf8\uc778 \ube44\ud65c\uc131\ud654\nDELETE FROM mysql.user WHERE User='root' AND Host NOT IN ('localhost', '127.0.0.1', '::1');\n\n-- \uc775\uba85 \uc0ac\uc6a9\uc790 \uc81c\uac70\nDELETE FROM mysql.user WHERE User='';\n\n-- test \ub370\uc774\ud130\ubca0\uc774\uc2a4 \uc81c\uac70\nDROP DATABASE IF EXISTS test;\n"})}),"\n",(0,s.jsx)(e.h2,{id:"9-php-fpm-\uc0c1\uc138-\uc124\uc815",children:"9. PHP-FPM \uc0c1\uc138 \uc124\uc815"}),"\n",(0,s.jsxs)(e.h3,{id:"wwwconf-\uc124\uc815",children:[(0,s.jsx)(e.a,{href:"http://www.conf",children:"www.conf"})," \uc124\uc815"]}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-ini",children:"# /etc/php/8.1/fpm/pool.d/www.conf\n[www]\nuser = www-data\ngroup = www-data\nlisten = /var/run/php/php8.1-fpm.sock\nlisten.owner = www-data\nlisten.group = www-data\nlisten.mode = 0660\n\n# \ud504\ub85c\uc138\uc2a4 \uad00\ub9ac\npm = dynamic\npm.max_children = 5\npm.start_servers = 2\npm.min_spare_servers = 1\npm.max_spare_servers = 3\n"})}),"\n",(0,s.jsx)(e.h3,{id:"phpini-\uc8fc\uc694-\uc124\uc815",children:"php.ini \uc8fc\uc694 \uc124\uc815"}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-ini",children:"# /etc/php/8.1/fpm/php.ini\nmemory_limit = 256M\nupload_max_filesize = 64M\npost_max_size = 64M\nmax_execution_time = 300\nmax_input_time = 300\ndisplay_errors = Off\nerror_reporting = E_ALL & ~E_DEPRECATED & ~E_STRICT\n"})}),"\n",(0,s.jsx)(e.h2,{id:"10-\ubaa8\ub2c8\ud130\ub9c1-\ubc0f-\ub514\ubc84\uae45",children:"10. \ubaa8\ub2c8\ud130\ub9c1 \ubc0f \ub514\ubc84\uae45"}),"\n",(0,s.jsx)(e.h3,{id:"mysql-\ubaa8\ub2c8\ud130\ub9c1",children:"MySQL \ubaa8\ub2c8\ud130\ub9c1"}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-sql",children:"-- \ud604\uc7ac \uc5f0\uacb0 \uc0c1\ud0dc\nSHOW PROCESSLIST;\n\n-- \uc2dc\uc2a4\ud15c \ubcc0\uc218 \ud655\uc778\nSHOW VARIABLES LIKE '%max_connections%';\nSHOW VARIABLES LIKE '%timeout%';\n\n-- \uc0c1\ud0dc \ud655\uc778\nSHOW STATUS LIKE 'Threads%';\nSHOW STATUS LIKE 'Questions';\n"})}),"\n",(0,s.jsx)(e.h3,{id:"php-\ubaa8\ub2c8\ud130\ub9c1",children:"PHP \ubaa8\ub2c8\ud130\ub9c1"}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-bash",children:"# PHP-FPM \uc0c1\ud0dc \ud398\uc774\uc9c0 \uc124\uc815\nlocation /status {\n    access_log off;\n    allow 127.0.0.1;\n    deny all;\n    include fastcgi_params;\n    fastcgi_param SCRIPT_NAME $uri;\n    fastcgi_pass unix:/var/run/php/php8.1-fpm.sock;\n}\n"})}),"\n",(0,s.jsx)(e.h2,{id:"11-\uc131\ub2a5-\ucd5c\uc801\ud654",children:"11. \uc131\ub2a5 \ucd5c\uc801\ud654"}),"\n",(0,s.jsx)(e.h3,{id:"mysql-\ud29c\ub2dd",children:"MySQL \ud29c\ub2dd"}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-ini",children:"# /etc/mysql/my.cnf\ninnodb_buffer_pool_size = 1G\ninnodb_log_file_size = 256M\ninnodb_flush_log_at_trx_commit = 2\ninnodb_flush_method = O_DIRECT\n"})}),"\n",(0,s.jsx)(e.h3,{id:"nginx-\ud29c\ub2dd",children:"Nginx \ud29c\ub2dd"}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-nginx",children:"# worker_processes \uc124\uc815\nworker_processes auto;\n\n# \ubc84\ud37c \uc124\uc815\nclient_max_body_size 64m;\nclient_body_buffer_size 128k;\nclient_header_buffer_size 1k;\n\n# Gzip \uc555\ucd95\ngzip on;\ngzip_comp_level 5;\ngzip_types text/plain text/css application/json application/javascript;\n"})}),"\n",(0,s.jsx)(e.h2,{id:"12-selinux-\uad6c\uc131-centosrhel",children:"12. SELinux \uad6c\uc131 (CentOS/RHEL)"}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-bash",children:"# SELinux \uc0c1\ud0dc \ud655\uc778\nsestatus\n\n# \uc6f9 \ub514\ub809\ud1a0\ub9ac \ucee8\ud14d\uc2a4\ud2b8 \uc124\uc815\nchcon -R -t httpd_sys_content_t /var/www/html/\nchcon -R -t httpd_sys_rw_content_t /var/www/html/writable_dir/\n\n# MySQL \uad00\ub828 \uc124\uc815\nsetsebool -P httpd_can_network_connect_db 1\nsetsebool -P httpd_can_network_connect 1\n"})}),"\n",(0,s.jsx)(e.h2,{id:"13-ssltls-\uc124\uc815",children:"13. SSL/TLS \uc124\uc815"}),"\n",(0,s.jsx)(e.h3,{id:"lets-encrypt-\uc778\uc99d\uc11c-\uc124\uce58",children:"Let's Encrypt \uc778\uc99d\uc11c \uc124\uce58"}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-bash",children:"# Certbot \uc124\uce58\nsudo apt install certbot python3-certbot-nginx\n\n# \uc778\uc99d\uc11c \ubc1c\uae09\nsudo certbot --nginx -d example.com -d www.example.com\n\n# \uc790\ub3d9 \uac31\uc2e0 \ud655\uc778\nsudo certbot renew --dry-run\n"})}),"\n",(0,s.jsx)(e.h3,{id:"nginx-ssl-\uc124\uc815",children:"Nginx SSL \uc124\uc815"}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-nginx",children:"server {\n    listen 443 ssl http2;\n    server_name example.com;\n\n    ssl_certificate /etc/letsencrypt/live/example.com/fullchain.pem;\n    ssl_certificate_key /etc/letsencrypt/live/example.com/privkey.pem;\n    \n    # SSL \ucd5c\uc801\ud654\n    ssl_session_timeout 1d;\n    ssl_session_cache shared:SSL:50m;\n    ssl_protocols TLSv1.2 TLSv1.3;\n    ssl_ciphers ECDHE-ECDSA-AES128-GCM-SHA256:ECDHE-RSA-AES128-GCM-SHA256;\n    ssl_prefer_server_ciphers off;\n}\n"})}),"\n",(0,s.jsx)(e.h2,{id:"14-\ubc31\uc5c5-\uc124\uc815",children:"14. \ubc31\uc5c5 \uc124\uc815"}),"\n",(0,s.jsx)(e.h3,{id:"mysql-\ubc31\uc5c5",children:"MySQL \ubc31\uc5c5"}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-bash",children:'# \uc790\ub3d9 \ubc31\uc5c5 \uc2a4\ud06c\ub9bd\ud2b8\n#!/bin/bash\nBACKUP_DIR="/backup/mysql"\nDATE=$(date +%Y%m%d)\nmysqldump --all-databases -u root -p[password] > $BACKUP_DIR/full_backup_$DATE.sql\n\n# \uc624\ub798\ub41c \ubc31\uc5c5 \uc0ad\uc81c\nfind $BACKUP_DIR -name "full_backup_*.sql" -mtime +7 -delete\n'})}),"\n",(0,s.jsx)(e.h3,{id:"\uc6f9-\ub370\uc774\ud130-\ubc31\uc5c5",children:"\uc6f9 \ub370\uc774\ud130 \ubc31\uc5c5"}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-bash",children:"# \uc6f9 \ub514\ub809\ud1a0\ub9ac \ubc31\uc5c5\ntar -czf /backup/www/website_$DATE.tar.gz /var/www/html/\n\n# \uc124\uc815 \ud30c\uc77c \ubc31\uc5c5\ntar -czf /backup/config/nginx_$DATE.tar.gz /etc/nginx/\ntar -czf /backup/config/php_$DATE.tar.gz /etc/php/\n"})}),"\n",(0,s.jsx)(e.h2,{id:"15-\ub85c\uadf8-\uad00\ub9ac",children:"15. \ub85c\uadf8 \uad00\ub9ac"}),"\n",(0,s.jsx)(e.h3,{id:"\ub85c\uadf8-\uc21c\ud658-\uc124\uc815",children:"\ub85c\uadf8 \uc21c\ud658 \uc124\uc815"}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-bash",children:"# /etc/logrotate.d/nginx\n/var/log/nginx/*.log {\n    daily\n    missingok\n    rotate 14\n    compress\n    delaycompress\n    notifempty\n    create 0640 www-data adm\n    sharedscripts\n    postrotate\n        /etc/init.d/nginx reload\n    endscript\n}\n"})}),"\n",(0,s.jsx)(e.h3,{id:"\ub85c\uadf8-\ubaa8\ub2c8\ud130\ub9c1",children:"\ub85c\uadf8 \ubaa8\ub2c8\ud130\ub9c1"}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-bash",children:"# \uc2e4\uc2dc\uac04 \ub85c\uadf8 \ubaa8\ub2c8\ud130\ub9c1\ntail -f /var/log/nginx/error.log\ntail -f /var/log/php8.1-fpm.log\ntail -f /var/log/mysql/error.log\n\n# \ub85c\uadf8 \ubd84\uc11d \ub3c4\uad6c \uc124\uce58\nsudo apt install goaccess\ngoaccess /var/log/nginx/access.log\n"})})]})}function h(n={}){const{wrapper:e}={...(0,i.R)(),...n.components};return e?(0,s.jsx)(e,{...n,children:(0,s.jsx)(o,{...n})}):o(n)}},8453:(n,e,l)=>{l.d(e,{R:()=>a,x:()=>c});var s=l(6540);const i={},r=s.createContext(i);function a(n){const e=s.useContext(r);return s.useMemo((function(){return"function"==typeof n?n(e):{...e,...n}}),[e,n])}function c(n){let e;return e=n.disableParentContext?"function"==typeof n.components?n.components(i):n.components||i:a(n.components),s.createElement(r.Provider,{value:e},n.children)}}}]);